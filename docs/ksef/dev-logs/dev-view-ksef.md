Viewing KSeF-Related Information in KsięgaI

Once KSięgaI is connected to KSeF for both sending and receiving, the app can provide a comprehensive view of KSeF status and data alongside the regular invoice details:

KSeF Status on Each Invoice: For sales invoices (outgoing), the invoice detail screen can show whether it has been sent to KSeF. For example, it might display “KSeF Status: Sent on 2026-02-10 (Reference No: 2026/ABC/…)" or if not sent, “Not yet submitted to KSeF”. In the database, ksef_status could be 'none', 'submitted', 'error', 'acknowledged', etc., and ksef_reference_number stores the actual ID. The UI can surface that. If there was an error sending, that could be shown too (and possibly an option to retry after fixing the issue).

KSeF UPO (Confirmation): The app could allow the user to view or download the UPO for any sent invoice. This is a proof for audit that the invoice is in the government system. The UPO typically contains a timestamp and the reference number (it’s essentially a receipt from the tax authority). KSięgaI might store the UPO as an attachment or in a dedicated field (the stub stored a dummy UPO string in ksef_upo). Providing a “View Acknowledgement” button could open a modal with the UPO details or allow download as PDF if the UPO is in PDF format.

Received Invoice Details: For incoming invoices fetched from KSeF, KSięgaI will list them just like any other invoice, but perhaps marked as “Received via KSeF”. The detail view can show the original supplier’s data exactly as on the invoice. There might be a note like “Source: KSeF (automatically retrieved)”. If the app wants to be fancy, it could also show the QR code that KSeF mandates on invoices for offline access (since for offline mode invoices, the supplier must give the buyer a QR code to retrieve it, but if we’re directly integrating, the QR code is less relevant because we get it through API anyway). Nonetheless, generating a PDF of the invoice with a QR could be done if needed for consistency with what the supplier sees.

Search and Archive: Because all invoices have KSeF references, KSięgaI could allow searching by KSeF number or cross-checking with KSeF. However, typically one would search by normal criteria (date, contractor, amount) and not by the raw ID.

Audit Trail: With KSeF, certain changes might happen – e.g., if a supplier issues a corrective invoice, that will also come through KSeF. KSięgaI should then relate it to the original invoice (perhaps linking them in the UI, like “This invoice corrects Invoice #X”). Keeping the context is important for accountants.

Other Info: Aside from invoices, KSeF might provide some metadata like the list of authorized users or tokens for the company, but that’s probably managed in the KSeF portal rather than via API calls that KSięgaI would incorporate. So the main “other info” the app would show is essentially the KSeF integration health (maybe status of last sync, token validity) and the invoice-specific data (reference IDs, statuses).

Given all that, the goal is that using KSięgaI, an accountant can handle both outgoing and incoming invoices in one place, with KSeF working in the background as the exchange mechanism. They can be confident that every invoice they issue is also in the government system (and they have proof of it), and every invoice they should receive from suppliers will appear for them without needing to chase paper or emails. This is a huge efficiency gain and also ensures compliance with the new law (no missed invoices means no missing costs in VAT returns, etc.).